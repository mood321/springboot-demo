### SpringBoot-Redis
#### NoSQL 技术
   ````
   为了克服高并发请求操作数据库导致系统瘫痪，Java Web项目通常会引入NoSQL技术，这是一种基于内存的数据库，并且提供一定的持久化功能。
   Redis和MongoDB是当前使用最广泛的NoSQL，而就Redis技术而言，它的性能十分优越，可以支持每秒十几万此的读/写操作，其性能远超数据库，并且还支持集群、分布式、主从同步等配置，原则上可以无限扩展，让更多的数据存储在内存中，更让人欣慰的是它还支持一定的事务能力，这保证了高并发的场景下数据的安全和一致性。

   ````
####  Redis 在 Java Web 中的应用
   ````
    Redis 在 Java Web 主要有两个应用场景：
    存储 缓存 用的数据；
    需要高速读/写的场合使用它快速读/写
   ````
   - 缓存
        ````
        在日常对数据库的访问中，读操作的次数远超写操作，比例大概在 1:9 到  3:7，所以需要读的可能性是比写的可能大得多的。
        当我们使用SQL语句去数据库进行读写操作时，数据库就会去磁盘把对应的数据索引取回来，这是一个相对较慢的过程。
        如果我们把数据放在 Redis 中，也就是直接放在内存之中，让服务端直接去读取内存中的数据，那么这样速度明显就会快上不少，
        并且会极大减小数据库的压力，但是使用内存进行数据存储开销也是比较大的，限于成本的原因，一般我们只是使用 Redis 存储一些常用和主要的数据，比如用户登录的信息等。
        一般而言在使用 Redis 进行存储的时候，我们需要从以下几个方面来考虑
        ````
        - __业务数据常用吗？命中率如何__ 如果命中率很低，就没有必要写入缓存；
        - __该业务数据是读操作多，还是写操作多？__ 如果写操作多，频繁需要写入数据库，也没有必要使用缓存；
        - __业务数据大小如何？__  如果要存储几百兆字节的文件，会给缓存带来很大的压力，这样也没有必要；
        
        - 缓存读流程
            ````
            1 当第一次读取数据的时候，读取 Redis 的数据就会失败，此时就会触发程序读取数据库，把数据读取出来，并且写入 Redis 中；
            2 当第二次以及以后需要读取数据时，就会直接读取 Redis，读到数据后就结束了流程，这样速度就大大提高了。
            ````
        - 缓存写流程
            ````
            在写请求操作上，有以下四种实现方式，不过它们都存在着一些不一致的问题。
            ````
            + 先写cache后写数据库
                ````
                这种方式，显而易见，当更新cache后，写数据库失败时，就会导致cache数据和数据库不一致。
                ````
            + 先写cache后写数据库
                ````
                两个并发写操作，可能导致脏数据。一个线程先写数据库，而比另外一个线程较慢写到cache，
                另一个线程后写数据库的进程先写到cache中，这种方式，导致cache数据落后数据库一个版本。
                ````
            + 先写数据库后失效cache
                ````
                 这种方式也会有不一致性的问题，不过概率比较小。
                ````
            > - 第一种情况：一个是读操作，但是没有命中缓存，然后就到数据库中取数据，此时来了一个写操作，
           写完数据库后，让缓存失效，然后，之前的那个读操作再把老的数据放进去，这时会造成脏数据。
           但这个case理论上会出现，实际上出现的概率可能非常低，因为这个条件需要发生在读缓存时缓存失效，
           而且并发着有一个写操作。而实际上数据库的写操作会比读操作慢一些，而读操作必需在写操作前进入数据库操作，
           而又要晚于写操作更新缓存，所有的这些条件都具备的概率基本并不大。
           > - 第二种情况：当写数据库后，失效cache时，失效操作失败，这会导致cache数据是旧数据。
            这种在读写cache操作时失败的情况无法避免（网络原因等，BDRP SLA 99.99%），所以会有0.01%的概率存在
           Cache和数据库的不一致的问题。为了避免这种极端条件下造成的缓存与数据库之间的数据不一致，缓存需要设置一个失效时间。
           时间到了，缓存自动被清理，达到缓存和数据库数据的“最终一致性”。
        
   -    springboot 中的使用 
        ````
        Redis目前有5种数据类型，分别是：
            String（字符串）
            List（列表）
            Hash（字典）
            Set（集合）
            Sorted Set（有序集合）
        ````
        三种操作方式：
           - [1  redis 命令]("http://how2j.cn/k/redis/redis-commands/1369.html")
           - [2 Jedis 方式](http://how2j.cn/k/redis/redis-jedis/1370.html)
           - [3 RedisTemplate 方式](http://how2j.cn/k/redis/redis-sping-data-redis/1719.html#nowhere)
        
                       
        
